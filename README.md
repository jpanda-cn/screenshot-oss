
# 熊猫截图工具
> 一个简单的截图工具，核心特点是在完成截图工作之后，可以将图片自动上传到网络中(Git/OSS等)，并将图片对应的地址以指定的格式回填到剪切板中。

## 特点
1. 用户截图时可以同步选择是否将图片存储到云环境，并将指定数据存放到剪切板中

![](https://screenshot-oss.s3.cn-north-1.jdcloud-oss.com/98716d89-0408-4f54-b5e8-32971582e682.png)

2.允许将截图固定展示在桌面上

![](https://screenshot-oss.s3.cn-north-1.jdcloud-oss.com/72011b50-4a57-43e4-93db-fb659e246913.png)

## 构建方式
项目比较简单，可以选择使用IDE工具启动，也可以选择jar包方式启动。
### jar包启动方式
1. 在项目根目录(pom.xml文件所处目录)执行命令`mvn jfx:jar`将会在`.\target\jfx\app`中生成一个`lib`目录以及一个名为`screenshot-oss-*-jfx.jar`的文件。

2. 使用命令`java -jar ./jpanda/screenshot-oss-1.0-*-jfx.jar`即可启动该工具。
### 打包成可执行文件
1. 在项目根目录(pom.xml文件所处目录)执行命令`mvn jfx:jar`将会在`.\target\jfx\app`中生成一个`lib`目录以及一个名为`screenshot-oss-*-jfx.jar`的文件。

2. 在项目根目录(pom.xml文件所处目录)执行命令`mvn jfx:native` 将会在`.\target\jfx\native`中生成一个可执行文件。

## 主要工作流程
在执行截图工作的时候，主要流程是 
- 1.获取指定屏幕当前快照，提供给用户操作。
- 2.用户完成截图，程序将用户的截图区域生成图片。
- 3.程序执行存储操作，并返回图片存储的地址。
- 4.程序将图片存储地址交由剪切板回调器使用，剪切板回调器拿到用户截图和图片存储地址，决定执行何种操作，并将结果通过剪切板的形式体现给用户。

## 其他
程序简单的实现了一个容器的功能，并针对于被`Component`注解的类提供了构造注入`ViewContext`和`Configuration`对象的能力。

程序的启动由三部分构造:
- 1.引导启动，在引导启动的过程中，主要完成了程序需要依赖的一些基础操作。
- 2.引动启动完成后置操作，该操作将在引导启动完成后，程序正式提供服务前完成。
- 3.界面上下文启动，提供服务
## 名词解释
- 存储方式 
> 存储方式表示截图完成之后，生成的图片保存的位置。
- 剪切板内容
> 用户完成截图后，存放到剪切板中的数据。

## 注意事项
### 图片存储和剪切板回调的限制
> 截图操作主要涉及到三步操作:截图，处理截图，处理剪切板的内容。
截图操作是独立的，但是处理截图和处理剪切板是互相关联的。
对于处理截图的操作，有两种，一种是有图片存储地址的，一种是无图片存储的地址的。
对于剪切板操作，主要有两种类型，一种是存放图片，一种是存放地址，理论上暂不支持其他的类型。
针对无图片存储地址的截图方式，处理地址的剪切板操作显然是不被允许的，因此，这里在实现上也做了限制。
### 需要持久化保存的数据对象的限制
> 针对于用户的配置，专门定义了用户数据持久化的`Persistence`顶级接口，用户的实体类只要实现了该接口，就可以通过核心类`Configuration`来完成对其自动读取和存储的功能。
这里需要注意的是，针对数据存储对象专门提供了一个注解`Profile`,该注解一方面用于指定用户数据持久化对象保存的配置文件名称和对象的类型，另一方面可以确保其会被`PersistenceBeanRegistry`扫描到，避免发生期望之外的问题，比如：用户修改密码时，不会同步变更未添加该注解的数据配置。

## 版本规划
### v1.0.2（规划中）
- 在截图区域边角处跟随鼠标展示当前截图区域的大小
- 为图钉窗口添加隐藏标题的功能
- 为图钉窗口添加隐藏边框的功能
- 图钉窗口的图片可以直接上传到云端

### v0.0.4(完成)
- 预期拆分现有截图保存按钮的功能，拆分为两个按钮，现有的`对号`形式的按钮，默认触发`不保存-图片`操作，而拆分出来的新的保存按钮，才会触发现有的配置，这样做的目的是为了避免使用该工具，误传图片。

- 为现有的截图保存操作，提供失败提醒和补偿机制，便于用户手动操作。

- 优化画笔和马赛克的撤销操作，将一次画笔和马赛克操作中的拖拽合而唯一。

- 优化:对于截图存储方式的配置的保存操作提供预校验的能力，即用于在对存储方式配置完成后，提供测试配置是否可用的能力。
